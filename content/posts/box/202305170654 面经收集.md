---
title: "2023面试准备"
subtitle: ""
description: ""
date: 2023-05-17T06:05:00+08:00
draft: true
authors: [索隆不喝酒]

tags: [个人记录]
series: [偏工作性质记录]
categories: [灵感、文献笔记（非永久笔记）]
series_weight: 1
seriesNavigation: true
featuredImage: ""
featuredImagePreview: ""
---
<!--more-->

> 我希望能够多做一些准备

1. Goalng
   - [Go三关-典藏版]Golang垃圾回收+混合写屏障GC全分析 - 知乎](https://zhuanlan.zhihu.com/p/334999060)
2. Kubernetes
3. 计算机网络
4. 操作系统
5. 算法

## 八股文方面

#### 说一下 docker

#### 说一下 kubernetes

#### 说一下 redis 

#### 为什么有 http 还要有 rpc

#### k8s 的架构

### Golang

- [Go 程序员面试笔试宝典 | Go 程序员面试笔试宝典](https://golang.design/go-questions/)

#### go 的 gc

#### go 的协程怎么实现的

#### gc 混合写屏障具体怎么做

- [Go三关-典藏版]Golang垃圾回收+混合写屏障GC全分析 - 知乎](https://zhuanlan.zhihu.com/p/334999060)

#### rune和byte的区别

`my ans 1`
```text
rune 是一个符文，对 unicode 编码来说，他就是一个码点，能够表示一个中文字符，是 int32 的类型

byte 是 uint8，一个字节
```

#### go有没有命令来进行逃逸分析？

`my ans 1`
```text
有的，go build -gcflag
```

### Kubernetes

#### pod 状态不是 running，可能是什么情况导致？

`my ans 1`:
```text
1. 可能是 pod 自身的原因，容器由于某些原因（可能是端口冲突、平台不兼容、代码有问题等等）导致启动失败
2. 有可能是节点的原因，可能资源不足了，一直 pending，或者说被驱逐了 evited等等
```

`cgpt`:
```text
Pod 的状态不是 Running 可能由多种情况导致。下面是一些可能的情况：

1. Pending（挂起）状态：Pod 可能处于挂起状态，这表示它正在等待底层资源的分配，例如 CPU、内存或存储等。这可能是由于集群资源不足或调度问题引起的。在这种情况下，你可以检查集群的资源使用情况，并确保足够的资源可用。

2. Container 创建失败：Pod 中的容器可能无法启动。这可能是由于容器镜像拉取失败、容器启动命令错误、容器资源请求过大或容器之间的端口冲突等原因引起的。你可以查看 Pod 的事件日志或容器的日志以获取更多详细信息。

3. CrashLoopBackOff（崩溃循环重启）状态：Pod 可能在启动后不断崩溃并重启。这可能是由于容器崩溃或终止导致的。你可以查看容器的日志以了解导致崩溃的原因，并相应地调整容器的配置。

4. ImagePullBackOff（镜像拉取失败）状态：Pod 可能无法成功拉取容器镜像。这可能是由于镜像名称错误、镜像不可用、拉取镜像所需的凭据不正确或网络连接问题等引起的。你可以验证镜像名称和凭据的正确性，并确保网络连接正常。

5. ErrImagePull（镜像拉取错误）状态：Pod 无法拉取容器镜像。这可能是由于权限问题、凭据不正确或镜像不可用等原因引起的。你可以检查 Pod 的事件日志以获取更多详细信息，并确保正确配置了凭据和权限。

6. Terminating（终止中）状态：Pod 可能正在被删除或终止。在这种情况下，Pod 的状态将从 Running 切换到 Terminating，直到最终被完全终止。这可能是由于用户删除 Pod 或者控制器进行了 Pod 的缩放或更新操作。

这些只是导致 Pod 状态不是 Running 的一些常见情况。要详细了解特定 Pod 的状态，可以查看该 Pod 的事件日志、容器日志以及集群的监控和日志记录工具，以获取更多关于问题的诊断信息。
```

`分析思路：`
```text
既然不是 running 状态，那么就可以从 pod 会是什么状态入手
可能是：
pending
container 创建失败
crashLoopBackOff 一直崩溃失败循环了
ImgPullBackOff 镜像拉取失败
Terminating 可能手动删除了，或者像 job 的任务执行成功了
```

#### pod 到 pod 之间的流量是怎么走的？请分析 pod 在同个节点的情况以及 pod 在不同节点的情况？

`my ans 1`
```text
首先可以分成两步来讲：1. 从 pod 到 api-server 2. api-server 到 pod 

从 api-server 到 pod 可以通过 ingress 或者 service，ingress 通过匹配一些定义好的路由，把请求转到对应的 service，service 会根据 labels selector 标签选择来找到对应的 endpoint slice，也就是定位到了一个断点
```

#### pod的虚拟ip是如何映射到物理网卡的？


`cgpt`
```text
在 Kubernetes 中，Pod 的虚拟 IP（也称为 Pod IP）是通过网络插件和容器运行时来实现的。具体的映射过程可能因为不同的网络插件和容器运行时而有所不同，下面是一个一般的流程：

1. 创建容器网络：当 Pod 被创建时，网络插件负责创建容器网络。容器网络是一个覆盖整个 Kubernetes 集群的虚拟网络，它提供了 Pod 之间的通信通道。

2. 分配 Pod IP：网络插件为每个 Pod 分配一个唯一的虚拟 IP 地址，即 Pod IP。Pod IP 是一个在容器网络中唯一的地址。

3. 容器运行时设置网络命名空间：容器运行时（如 Docker、Containerd 等）负责创建和管理 Pod 中的容器。在创建容器时，容器运行时会为每个容器创建一个独立的网络命名空间。

4. 虚拟网络设备和网桥：在容器网络命名空间中，网络插件创建虚拟网络设备（通常称为 veth 设备），其中一个端口连接到容器，另一个端口连接到宿主节点的网络命名空间。

5. IP 路由和转发规则：在宿主节点的网络命名空间中，网络插件负责设置 IP 路由和转发规则，以确保来自其他节点的流量可以正确路由到目标 Pod。这通常涉及设置虚拟网络设备和网桥之间的路由和转发规则。

6. 物理网卡绑定：虚拟网络设备通过网桥与宿主节点的物理网卡连接。网络插件将虚拟网络设备绑定到物理网卡上，使得通过物理网卡可以收发来自虚拟网络设备的流量。

因此，Pod 的虚拟 IP 最终通过虚拟网络设备、网桥和物理网卡的连接，映射到了宿主节点的物理网卡上，从而实现了与其他节点和外部网络的通信。这种映射过程是由网络插件和容器运行时共同协作完成的，确保了 Pod 的网络连接和通信能力。
```

#### 如何排查node notReady 的情况？


### 数据库

#### 在一个大型数据库中，你会如何优化查询性能？

`cgpt`
```text
在大型数据库中优化查询性能是一个复杂的任务，需要综合考虑多个方面。以下是一些常见的优化方法：

1. 索引优化：通过在关键字段上创建索引，可以加快查询速度。确保为经常用于查询条件的字段创建适当的索引，并根据实际情况选择不同类型的索引（如B树索引或哈希索引）。

2. 查询优化：优化查询语句的编写，包括选择合适的查询方式、减少查询中的连接操作、使用合适的连接类型（如内连接、外连接等），并避免不必要的子查询。

3. 分区和分片：将数据库分成多个分区或分片，可以将数据分散到不同的物理存储设备或服务器上，从而提高查询并行性和负载均衡。

4. 缓存：使用缓存技术，将经常查询的数据缓存在内存中，可以大大减少数据库访问次数，提高查询性能。常见的缓存技术包括使用内存数据库（如Redis）、使用分布式缓存（如Memcached）等。

5. 硬件升级：通过增加更快的处理器、更大的内存或更快的存储设备，可以提升数据库服务器的整体性能。

6. 数据库优化参数设置：针对具体的数据库管理系统，调整一些关键的配置参数，如查询缓冲区大小、并发连接数、查询超时时间等，以优化数据库的性能。

7. 数据库分析和监控：使用数据库性能分析工具和监控工具，定期分析数据库的查询性能、瓶颈和负载情况，及时采取措施进行优化。

8. 数据库分表和归档：对于历史数据或稀疏访问的数据，可以考虑进行分表或归档操作，将其从主要的查询表中分离出来，减轻主表的负担。

9. 数据库集群和复制：对于高负载的场景，可以考虑使用数据库集群和复制技术，将数据库复制到多个节点上，实现负载均衡和故障容错。

以上只是一些常见的优化方法，具体的优化策略还需要根据实际情况进行综合考虑。同时，不同的数据库管理系统可能有不同的优化技术和工具，因此建议根据具体使用的数据库系统进行更详细的研究和调优。
```

#### 什么是事务？ACID 分别代表什么？

 - [数据库的一些概念 - 学习记录](https://honghuiqiang.com/202305221620-%E6%95%B0%E6%8D%AE%E5%BA%93%E7%9A%84%E4%B8%80%E4%BA%9B%E6%A6%82%E5%BF%B5/#acid)


`chatgpt`
```text
事务（Transaction）是指一组数据库操作，它们被视为一个逻辑单元，要么全部执行成功，要么全部回滚到事务开始前的状态，以保证数据的一致性和完整性。

ACID是事务的四个特性的首字母缩写：

原子性（Atomicity）：事务被视为一个不可分割的原子操作单元，要么全部执行成功，要么全部失败回滚。即使发生系统故障或异常，事务中的操作也会被完全执行或完全撤销，不会留下部分执行的结果。

一致性（Consistency）：事务执行前和执行后，数据库的状态必须保持一致。事务对数据库所做的更改必须符合预定义的规则和约束，包括数据类型、完整性约束、触发器等。如果事务执行失败，数据库将回滚到事务开始之前的一致状态。

隔离性（Isolation）：事务的执行应该相互隔离，使它们看起来彼此独立。并发执行的多个事务之间应该互不干扰，每个事务应该感知不到其他事务的存在。这意味着事务在执行过程中所使用的数据应该是私有的，不会被其他事务读取或修改。

持久性（Durability）：一旦事务成功提交，其对数据库的更改应该是永久性的，即使发生系统故障或重启，这些更改也应该被保留。数据库系统通常会使用日志记录（或其他机制）来确保事务的持久性。

ACID是保证事务正确执行的重要原则，它们确保了数据库在并发和故障情况下的可靠性和稳定性。事务的正确使用可以保证数据的一致性和完整性，同时提供了对数据库操作的可靠控制。
```
- 解释一下数据库索引的概念，有什么作用？

`chatgpt`

```text
数据库索引是一种数据结构，用于加速数据库查询操作的过程。它是根据一个或多个字段（列）创建的，可以快速定位和访问数据库表中的数据行。

索引的作用是提高数据库查询的速度和效率。当执行查询语句时，数据库可以利用索引来快速定位满足查询条件的数据行，而不必扫描整个表。索引的存在可以大大减少查询所需的IO操作，从而加快查询的执行速度。

具体来说，索引通过将索引字段的值映射到相应的数据行位置，实现了以下几个方面的优化：

1. 加快数据检索：索引允许数据库直接跳过不需要的数据行，只检索满足查询条件的数据行，从而减少了磁盘IO的开销，提高了查询速度。

2. 提高查询性能：通过使用索引，数据库可以在查询过程中使用更高效的算法和数据结构，减少数据比较和排序的成本，从而提高查询性能。

3. 支持排序和聚合操作：索引可以提供排序和聚合操作的支持，使这些操作能够快速地进行。

尽管索引可以提高查询性能，但它们也带来了一些开销：

1. 存储开销：索引需要占用额外的存储空间来存储索引数据结构。随着索引的增加，数据库的存储需求也会增加。

2. 更新开销：当对表中的数据进行插入、更新或删除操作时，索引也需要进行相应的更新，这可能导致一些额外的开销。

因此，在使用索引时需要权衡索引的创建和维护开销与查询性能的提升。通常，需要根据实际情况选择哪些字段需要创建索引，以及选择适当的索引类型（如B树索引、哈希索引等）。
```


### 计算机网络

### 操作系统

### 生产问题定位

#### 当一个线上服务出现频繁的连接超时问题，你会如何定位和解决这个问题

`cgpt`
```text
当一个线上服务出现频繁的连接超时问题时，可以采取以下步骤进行定位和解决问题：

1. 检查客户端和服务端网络连接：确认客户端和服务端的网络连接是否正常。检查网络设备、防火墙设置、代理配置等。确保网络连接稳定并没有任何异常。

2. 检查服务器负载：检查服务器的负载情况，包括 CPU 使用率、内存使用率、磁盘使用率等。如果服务器过载，可能导致连接超时。增加服务器资源或优化代码可以解决这个问题。

3. 日志分析：查看服务器端和客户端的日志，寻找与连接超时相关的错误或异常信息。日志中可能包含有用的提示，如连接超时错误代码、超时时间等。分析日志可以帮助确定问题的来源。

4. 测试连接：使用工具进行连接测试，检查连接的稳定性和响应时间。例如，可以使用诸如ping、traceroute等命令或在线工具来检测连接是否存在延迟或丢包。

5. 限制资源使用：如果服务端资源有限，可以考虑实施一些限制措施，例如限制每个连接的带宽、连接数或请求频率。这样可以避免服务过载，提高连接稳定性。

6. 优化代码和配置：检查服务端和客户端的代码和配置，寻找可能导致连接超时的问题。可能存在网络超时设置过短、请求处理时间过长、并发连接处理不当等情况。优化代码和配置可以提高连接的可靠性和响应速度。

7. 使用缓存和负载均衡：考虑使用缓存技术和负载均衡来减轻服务端的负载压力，提高性能和稳定性。缓存常用的数据可以减少与数据库或其他服务的连接次数，负载均衡可以将请求均匀地分发到多个服务器上。

8. 监控和警报：设置监控系统来实时监测服务的状态和性能指标。可以设置警报机制，当连接超时频繁发生时，及时通知相关人员进行处理。

以上是一些常见的定位和解决连接超时问题的步骤。具体的解决方法可能因具体情况而异，需要根据实际情况进行调整和优化。如果问题仍然存在，可能需要进一步进行网络和系统层面的调试和分析。
```

### 系统设计

#### 设计一个简单的分布式键值存储系统，要求考虑数据一致性和容错性

`cgpt`:
```text
要设计一个简单的分布式键值存储系统，需要考虑数据一致性和容错性。下面是一个基本的架构设计，以满足这些要求：

1. 数据分片：将数据分成多个片段，每个片段包含一部分键值对。这样可以将数据分布在不同的节点上，实现负载均衡和扩展性。

2. 一致性哈希：使用一致性哈希算法将键值对映射到具体的节点。一致性哈希可以使得当节点增加或者减少时，只有部分键值对需要重新映射，减少数据迁移的开销。

3. 复制和冗余：为了提高容错性，可以将每个片段的数据复制到多个节点上。这样当某个节点失效时，系统可以从其他节点获取相同的数据，确保数据的可用性和一致性。

4. 数据一致性协议：采用一种数据一致性协议，例如Paxos或Raft，来确保多个节点之间的数据一致性。这些协议可以保证在节点故障或网络分区等情况下，系统仍然能够保持数据的一致性。

5. 容错机制：在系统中引入故障检测和恢复机制，例如心跳机制和自动故障转移。当节点出现故障时，系统可以检测到节点失效，并将其替换为新的可用节点，以保持系统的可用性和容错性。

6. 客户端接口：为客户端提供一个简单易用的接口，使其可以通过键来访问和操作存储在系统中的值。客户端可以向系统发起读取、写入和删除等操作，并且系统会负责将请求转发到正确的节点，并返回相应的结果。

需要注意的是，这只是一个简单的设计方案，实际的分布式键值存储系统可能还需要考虑更多的细节，例如负载均衡策略、数据备份和恢复策略、性能优化等。在实际的系统设计中，还需要仔细评估各种因素，并根据具体需求做出相应的决策。
```

#### 请设计一个高并发的 Web 服务，能够处理大量的请求并保持可扩展性

`cgpt`:
```text
要设计一个高并发的Web服务，并保持可扩展性，可以考虑以下几个关键点：

1. 使用异步非阻塞的服务器：选择使用异步非阻塞的服务器框架，如Node.js或Go，可以处理大量并发请求，而无需为每个请求创建新的线程。这样可以减少线程切换的开销，并提高系统的并发能力。

2. 水平扩展：采用水平扩展的方式增加系统的处理能力。将负载均衡器放在Web服务的前面，将请求均匀分发到多个服务节点上。这样可以通过增加服务器节点来扩展系统的处理能力，同时提高可用性。

3. 缓存：使用缓存来减轻对后端资源的压力。将经常访问的数据缓存在内存中，例如使用Redis或Memcached等内存数据库。这样可以避免频繁的数据库访问，提高响应速度和系统的吞吐量。

4. 异步处理和消息队列：对于一些耗时的操作，将其转化为异步任务，并使用消息队列来进行异步处理。例如，将需要进行大量计算的请求放入消息队列中，由后台的工作进程异步处理。这样可以避免请求阻塞，并提高系统的并发能力。

5. 数据库优化：优化数据库的设计和查询性能。合理设计数据库表结构、建立索引、使用数据库连接池等技术手段，可以提高数据库的查询效率和并发处理能力。

6. CDN和静态资源优化：使用CDN（内容分发网络）来分发静态资源，如图片、CSS和JavaScript文件。CDN可以将这些资源缓存在全球各地的节点上，提供更快的访问速度，并减轻Web服务的负载。

7. 监控和自动伸缩：建立监控系统，实时监测系统的性能和负载情况。当系统负载过高时，自动触发伸缩机制，增加或减少服务器节点数量，以满足不同负载下的需求。

以上是一些基本的设计考虑点，实际设计中还需要根据具体情况进行优化和调整。同时，合理的系统架构和设计并非一蹴而就，需要不断迭代和优化，以适应不断增长的需求和用户量。
```

## 开放性问题

-  最近读了什么书，有没有压力大的情况

- 个人如何做情绪管理的？

- 个人的职业规划？你进来能做什么工作？

- 项目里感觉最困难的是什么？

- 你有什么要问我的吗？

- 离职原因

- 离职期间的规划？

    离职期间没有做一个很具体的规划，但是在这段时间里面，我是有要求自己做到一些事情的：在专业知识的方面，我需要对之前工作上用到的、接触到的内容再做一个回顾，对当时不太理解的一些东西做适当的扩展、补充之类的，然后对一些可能已经遗忘的知识稍微做一下回顾，比如说算法、操作系统之类的，然后就是专业知识之外的一些东西，像阅读、爱好、旅游之类的，调整一下自己的状态
